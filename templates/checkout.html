{% extends 'base.html' %}

{% block title %}
Checkout
{% endblock %}

{% block content %}
<div class="container text-center mt-3 mb-5">
    <div class="container text-start">
        <h3>Checkout</h3>
        <br>
    </div>
    <div class="text-center border p-2 rounded d-flex flex-wrap flex-row gap-1 justify-content-center"
        id="checkout-menu" style="width: 100%;">
        <div class="text-start mt-2 mb-2 d-flex flex-wrap grid gap-3" id="checkout-menu">
            {% for item in cart_items %}
            <div class="card" style="width: 100%;">
                <a href="/detail_menu/{{ item['_id'] }}" class="g-0 align-items-center d-flex flex-wrap text-start"
                    id="card-keranjang">
                    <div class="col">
                        <img src="{{ item['fotomenu'] }}" class="img-fluid rounded-start" alt="..."
                            style="max-width: 70px;">
                    </div>
                    <div class="col d-flex flex-wrap">
                        <!-- Nama Pesanan -->
                        <p>{{ item['namamenu'] }}</p>
                    </div>
                    <div class="col d-flex flex-wrap">
                        <!-- Harga -->
                        <p>Rp. {{ item['hargamenu']|int }}</p>
                    </div>
                    <div class="col d-flex flex-wrap align-items-center">
                        <!-- Quantity -->
                        <p>{{ item['quantity'] }}</p>
                    </div>
                    <div class="col d-flex flex-wrap">
                        <!-- Total Harga -->
                        <p>Rp. {{ item['hargamenu']|int * item['quantity'] }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>

        <div class="p-2 text-start mt-2 mb-2 d-flex flex-wrap grid gap-3 border" id="checkout-total">
            <h3>Informasi Pemesanan</h3>
            <form action="{{ url_for('checkout') }}" method="POST">
                <select class="form-select" aria-label="Pilih Metode Pembayaran" name="metode_pembayaran">
                    <option selected disabled>Pilih Pembayaran</option>
                    <option value="1">BCA</option>
                    <option value="2">OVO</option>
                    <option value="3">Kasir</option>
                </select>
                <p>Nama Pemesan</p>
                <h5>{{ user['nama'] }}</h5>
                <p>Total Yang Harus Dibayarkan</p>
                <h5>Rp. {{ total_amount }}</h5>
                <div class="container text-center mt-2 mb-2">
                    <button type="submit" class="btn btn-primary">Bayar Sekarang</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}